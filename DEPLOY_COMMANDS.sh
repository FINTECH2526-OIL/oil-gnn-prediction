#!/bin/bash

echo "Deployment Commands for Oil GNN Prediction API"
echo "================================================"
echo ""
echo "Step 1: Build and Push Docker Image"
echo "------------------------------------"
echo "cd /Users/pleng/Documents/FINTECH/Deployment/oil-gnn-prediction"
echo "gcloud builds submit --tag us-central1-docker.pkg.dev/manifest-vault-470110-k5/oil-gnn-repo/oil-gnn-api:latest -f Dockerfile ."
echo ""
echo "Step 2: Deploy to Cloud Run"
echo "----------------------------"
echo "gcloud run deploy oil-gnn-api \\"
echo "  --image us-central1-docker.pkg.dev/manifest-vault-470110-k5/oil-gnn-repo/oil-gnn-api:latest \\"
echo "  --platform managed \\"
echo "  --region us-central1 \\"
echo "  --allow-unauthenticated \\"
echo "  --memory 4Gi \\"
echo "  --cpu 2 \\"
echo "  --timeout 300 \\"
echo "  --set-env-vars ALPHA_VANTAGE_API_KEY=WY4DN5PO5LQ3INPJ,GCS_BUCKET_NAME=gdelt_raw_3_years,GCP_PROJECT_ID=manifest-vault-470110-k5"
echo ""
echo "Step 3: Test the API"
echo "--------------------"
echo "curl -X POST https://oil-gnn-api-1072886277511.us-central1.run.app/predict \\"
echo "  -H 'Content-Type: application/json' \\"
echo "  -d '{\"country\": \"US\"}'"
echo ""
echo "================================================"
echo ""
echo "If gcloud is not in PATH, add it:"
echo "export PATH=\$PATH:\$HOME/google-cloud-sdk/bin"
echo ""
echo "Or find it with:"
echo "find /Applications -name gcloud -type f 2>/dev/null | head -1"
